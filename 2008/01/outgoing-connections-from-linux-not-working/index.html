<!doctype html><html lang=en dir=auto>
<head><meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge">
<meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no">
<meta name=robots content="index, follow">
<title>Outgoing connections from Linux not working | marcfargas.com</title>
<meta name=keywords content="network">
<meta name=description content="A friend of mine has a nice MythTV box on his bedroom. Suddently the box decided to not open outgoing connections anymore&mldr; I say outgoing because I could still connect to it from my home.
I could not find out what was last changed, maybe an aptitude upgrade or did he change ISP?
After some time looking around the only thing I could find out was a small difference between a SYN packet send from a remote place and the SYN packets send by the broken system:">
<meta name=author content="Marc Fargas">
<link rel=canonical href=https://www.marcfargas.com/2008/01/outgoing-connections-from-linux-not-working/>
<link crossorigin=anonymous href=/assets/css/stylesheet.min.6cba0d81b5f3f42bb578d49f402ba4175aa72b43def148780b8ad714c957c6f5.css integrity="sha256-bLoNgbXz9Cu1eNSfQCukF1qnK0Pe8Uh4C4rXFMlXxvU=" rel="preload stylesheet" as=style>
<script defer crossorigin=anonymous src=/assets/js/highlight.min.7680afc38aa6b15ddf158a4f3780b7b1f7dde7e91d26f073e6229bb7a0793c92.js integrity="sha256-doCvw4qmsV3fFYpPN4C3sffd5+kdJvBz5iKbt6B5PJI=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://www.marcfargas.com/favicon.ico>
<link rel=icon type=image/png sizes=16x16 href=https://www.marcfargas.com/favicon-16x16.png>
<link rel=icon type=image/png sizes=32x32 href=https://www.marcfargas.com/favicon-32x32.png>
<link rel=apple-touch-icon href=https://www.marcfargas.com/apple-touch-icon.png>
<link rel=mask-icon href=https://www.marcfargas.com/safari-pinned-tab.svg>
<meta name=theme-color content="#2e2e33">
<meta name=msapplication-TileColor content="#2e2e33">
<meta name=generator content="Hugo 0.87.0">
<meta property="og:title" content="Outgoing connections from Linux not working">
<meta property="og:description" content="A friend of mine has a nice MythTV box on his bedroom. Suddently the box decided to not open outgoing connections anymore&mldr; I say outgoing because I could still connect to it from my home.
I could not find out what was last changed, maybe an aptitude upgrade or did he change ISP?
After some time looking around the only thing I could find out was a small difference between a SYN packet send from a remote place and the SYN packets send by the broken system:">
<meta property="og:type" content="article">
<meta property="og:url" content="https://www.marcfargas.com/2008/01/outgoing-connections-from-linux-not-working/"><meta property="article:section" content="posts">
<meta property="article:published_time" content="2008-01-13T13:10:00+01:00">
<meta property="article:modified_time" content="2008-01-13T13:10:00+01:00">
<meta name=twitter:card content="summary">
<meta name=twitter:title content="Outgoing connections from Linux not working">
<meta name=twitter:description content="A friend of mine has a nice MythTV box on his bedroom. Suddently the box decided to not open outgoing connections anymore&mldr; I say outgoing because I could still connect to it from my home.
I could not find out what was last changed, maybe an aptitude upgrade or did he change ISP?
After some time looking around the only thing I could find out was a small difference between a SYN packet send from a remote place and the SYN packets send by the broken system:">
<script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"Posts","item":"https://www.marcfargas.com/posts/"},{"@type":"ListItem","position":3,"name":"Outgoing connections from Linux not working","item":"https://www.marcfargas.com/2008/01/outgoing-connections-from-linux-not-working/"}]}</script>
<script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Outgoing connections from Linux not working","name":"Outgoing connections from Linux not working","description":"A friend of mine has a nice MythTV box on his bedroom. Suddently the box decided to not open outgoing connections anymore\u0026hellip; I say outgoing because I could still connect to it from my home.\nI could not find out what was last changed, maybe an aptitude upgrade or did he change ISP?\nAfter some time looking around the only thing I could find out was a small difference between a SYN packet send from a remote place and the SYN packets send by the broken system:","keywords":["network"],"articleBody":"A friend of mine has a nice MythTV box on his bedroom. Suddently the box decided to not open outgoing connections anymore… I say outgoing because I could still connect to it from my home.\nI could not find out what was last changed, maybe an aptitude upgrade or did he change ISP?\nAfter some time looking around the only thing I could find out was a small difference between a SYN packet send from a remote place and the SYN packets send by the broken system:\n22:56:47.855219 IP Banner.local.33509  google.es.www: S 206185417:206185417(0) win 5840 23:24:16.072713 IP golfos.net.42742  Banner.local.ssh: S 1705835822:1705835822(0) win 5840 You see, his box was sending wscale 5 and remote sites sent wscale 4, google, google, more google until I read this:\n I think OpenBSD’s claim (they did have the bug and probably still do for all that I know) was that they wanted to make their firewalling “stateless” source.\n Maybe the router does not know what wscale means? I disabled the router’s firewall completelly (I was sure I already did this…) and suddently everything worked fine…\nSure, I have to read more about windows scaling and try to understand what is wrong with the router’s firewall but for now: things work.\n","wordCount":"217","inLanguage":"en","datePublished":"2008-01-13T13:10:00+01:00","dateModified":"2008-01-13T13:10:00+01:00","author":{"@type":"Person","name":"Marc Fargas"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://www.marcfargas.com/2008/01/outgoing-connections-from-linux-not-working/"},"publisher":{"@type":"Organization","name":"marcfargas.com","logo":{"@type":"ImageObject","url":"https://www.marcfargas.com/favicon.ico"}}}</script>
</head>
<body id=top>
<script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add('dark'):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove('dark'):window.matchMedia('(prefers-color-scheme: dark)').matches&&document.body.classList.add('dark')</script>
<noscript>
<style type=text/css>#theme-toggle,.top-link{display:none}</style>
<style>@media(prefers-color-scheme:dark){:root{--theme:#1d1e20;--entry:#2e2e33;--primary:rgba(255, 255, 255, 0.84);--secondary:rgba(255, 255, 255, 0.56);--tertiary:rgba(255, 255, 255, 0.16);--content:rgba(255, 255, 255, 0.74);--hljs-bg:#2e2e33;--code-bg:#37383e;--border:#333}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style>
</noscript>
<header class=header>
<nav class=nav>
<div class=logo>
<a href=https://www.marcfargas.com accesskey=h title="marcfargas.com (Alt + H)">marcfargas.com</a>
<span class=logo-switches>
<button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg>
</button>
</span>
</div>
<ul id=menu>
<li>
<a href=https://www.marcfargas.com/archives title=Archive>
<span>Archive</span>
</a>
</li>
<li>
<a href=https://www.marcfargas.com/search/ title="Search (Alt + /)" accesskey=/>
<span>Search</span>
</a>
</li>
<li>
<a href=https://www.marcfargas.com/tags/ title=Tags>
<span>Tags</span>
</a>
</li>
</ul>
</nav>
</header>
<main class=main>
<article class=post-single>
<header class=post-header>
<div class=breadcrumbs><a href=https://www.marcfargas.com>Home</a>&nbsp;»&nbsp;<a href=https://www.marcfargas.com/posts/>Posts</a></div>
<h1 class=post-title>
Outgoing connections from Linux not working
</h1>
<div class=post-meta>Jan 13, 2008&nbsp;·&nbsp;2 min&nbsp;·&nbsp;Marc Fargas
</div>
</header> <div class=toc>
<details open>
<summary accesskey=c title="(Alt + C)">
<div class=details>Table of Contents</div>
</summary>
<div class=inner>
</div>
</details>
</div>
<div class=post-content><p>A friend of mine has a nice MythTV box on his bedroom. Suddently the box decided to not open outgoing connections anymore&mldr; I say outgoing because I could still connect to it from my home.</p>
<p>I could not find out what was last changed, maybe an aptitude upgrade or did he change ISP?</p>
<p>After some time looking around the only thing I could find out was a small difference between a SYN packet send from a remote place and the SYN packets send by the broken system:</p>
<pre><code class=language-none data-lang=none>22:56:47.855219 IP Banner.local.33509 &gt; google.es.www: S 206185417:206185417(0)
    win 5840 &lt;mss 1460,sackOK,timestamp 218414628 0,nop,wscale 5&gt;

23:24:16.072713 IP golfos.net.42742 &gt; Banner.local.ssh: S 1705835822:1705835822(0)
    win 5840 &lt;mss 1460,sackOK,timestamp 5636642 0,nop,wscale 4&gt;
</code></pre><p>You see, his box was sending wscale 5 and remote sites sent wscale 4, google, google, more google until I read this:</p>
<blockquote>
<p>I think OpenBSD&rsquo;s claim (they did have the bug and probably still do for all that I know) was that they wanted to make their firewalling &ldquo;stateless&rdquo; <a href=http://kerneltrap.org/node/6723>source</a>.</p>
</blockquote>
<p>Maybe the router does not know what wscale means? I disabled the router&rsquo;s firewall completelly (I was sure I already did this&mldr;) and suddently everything worked fine&mldr;</p>
<p>Sure, I have to read more about windows scaling and try to understand what is wrong with the router&rsquo;s firewall but for now: things work.</p>
</div>
<footer class=post-footer>
<ul class=post-tags>
<li><a href=https://www.marcfargas.com/tags/network/>network</a></li>
</ul>
</footer>
</article>
</main>
<footer class=footer>
<span>© 2021
| Follow on Twitter
| PaperMod theme
& Hugo ♥</span>
<span>
Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a>
</span>
</footer>
<a href=#top aria-label="go to top" title="Go to Top (Alt + G)">
<button class=top-link id=top-link type=button accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</button>
</a>
<script>let menu=document.getElementById('menu');menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)},document.querySelectorAll('a[href^="#"]').forEach(a=>{a.addEventListener("click",function(b){b.preventDefault();var a=this.getAttribute("href").substr(1);window.matchMedia('(prefers-reduced-motion: reduce)').matches?document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView({behavior:"smooth"}),a==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${a}`)})})</script>
<script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script>
<script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove('dark'),localStorage.setItem("pref-theme",'light')):(document.body.classList.add('dark'),localStorage.setItem("pref-theme",'dark'))})</script>
<script>document.querySelectorAll('pre > code').forEach(b=>{const c=b.parentNode.parentNode,a=document.createElement('button');a.classList.add('copy-code'),a.innerText='copy';function d(){a.innerText='copied!',setTimeout(()=>{a.innerText='copy'},2e3)}a.addEventListener('click',e=>{if('clipboard'in navigator){navigator.clipboard.writeText(b.textContent),d();return}const a=document.createRange();a.selectNodeContents(b);const c=window.getSelection();c.removeAllRanges(),c.addRange(a);try{document.execCommand('copy'),d()}catch(a){}c.removeRange(a)}),c.classList.contains("highlight")?c.appendChild(a):c.parentNode.firstChild==c||(b.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?b.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(a):b.parentNode.appendChild(a))})</script>
</body>
</html>