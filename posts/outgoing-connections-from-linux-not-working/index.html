<!doctype html><html lang=en-us>
<head>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<meta content="debian,linux,barcelona,business,law,tax" name=keywords>
<meta content="Marc Fargas" name=author>
<meta property="og:title" content="Outgoing connections from Linux not working - marcfargas.com">
<meta property="og:url" content="https://www.marcfargas.com/posts/outgoing-connections-from-linux-not-working/">
<meta property="og:description" content="Personal blog of Marc Fargas">
<meta property="og:type" content="website">
<title>Outgoing connections from Linux not working | marcfargas.com</title>
<script type=text/x-mathjax-config>
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>
<link rel=stylesheet href=https://www.marcfargas.com/css/style.css>
<link rel="shortcut icon" href=https://www.marcfargas.com/favicon.ico>
<link rel=stylesheet href=//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin=anonymous>
<link rel=stylesheet href=//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/styles/solarized-light.min.css>
</head>
<body>
<section class=section>
<div class=container>
<nav class=nav>
<div class=nav-left>
<a class=nav-item href=https://www.marcfargas.com><h1 class="title is-4">marcfargas.com</h1></a>
</div>
<div class=nav-right>
<nav class="nav-item level is-mobile">
<a class=level-item href=https://github.com/telenieko target=_blank>
<span class=icon>
<i class="fa fa-github"></i>
</span>
</a>
<a class=level-item href=https://twitter.com/telenieko target=_blank>
<span class=icon>
<i class="fa fa-twitter"></i>
</span>
</a>
<a class=level-item href=https://linkedin.com/in/marc-fargas-58a4307 target=_blank>
<span class=icon>
<i class="fa fa-linkedin-square"></i>
</span>
</a>
<a class=level-item href=/index.xml target=_blank>
<span class=icon>
<i class="fa fa-rss"></i>
</span>
</a>
</nav>
</div>
</nav>
</div>
</section>
<section class=section>
<div class=container>
<h1 class=title>Outgoing connections from Linux not working</h1>
<h2 class="subtitle is-5">January 13, 2008 by Marc Fargas</h2>
<div class=tags>
<a class="button is-link" href=/tags/network>network</a>
</div>
<div class=content>
<p>A friend of mine has a nice MythTV box on his bedroom. Suddently the box decided to not open outgoing connections anymore&mldr; I say outgoing because I could still connect to it from my home.</p>
<p>I could not find out what was last changed, maybe an aptitude upgrade or did he change ISP?</p>
<p>After some time looking around the only thing I could find out was a small difference between a SYN packet send from a remote place and the SYN packets send by the broken system:</p>
<pre><code class=language-none data-lang=none>22:56:47.855219 IP Banner.local.33509 &gt; google.es.www: S 206185417:206185417(0)
    win 5840 &lt;mss 1460,sackOK,timestamp 218414628 0,nop,wscale 5&gt;

23:24:16.072713 IP golfos.net.42742 &gt; Banner.local.ssh: S 1705835822:1705835822(0)
    win 5840 &lt;mss 1460,sackOK,timestamp 5636642 0,nop,wscale 4&gt;
</code></pre><p>You see, his box was sending wscale 5 and remote sites sent wscale 4, google, google, more google until I read this:</p>
<blockquote>
<p>I think OpenBSD&rsquo;s claim (they did have the bug and probably still do for all that I know) was that they wanted to make their firewalling &ldquo;stateless&rdquo; <a href=http://kerneltrap.org/node/6723>source</a>.</p>
</blockquote>
<p>Maybe the router does not know what wscale means? I disabled the router&rsquo;s firewall completelly (I was sure I already did this&mldr;) and suddently everything worked fine&mldr;</p>
<p>Sure, I have to read more about windows scaling and try to understand what is wrong with the router&rsquo;s firewall but for now: things work.</p>
</div>
<div class=nav-left>
<a class=nav-item href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fwww.marcfargas.com%2fposts%2foutgoing-connections-from-linux-not-working%2f" title="Share on Facebook" target=_blank><span class="fa fa-facebook fa-2x" aria-hidden=true></span></a>
<a class=nav-item href="https://plus.google.com/share?url=https%3a%2f%2fwww.marcfargas.com%2fposts%2foutgoing-connections-from-linux-not-working%2f" title="Share on Google+" target=_blank><span class="fa fa-google-plus fa-2x" aria-hidden=true></span></a>
<a class=nav-item href="https://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2fwww.marcfargas.com%2fposts%2foutgoing-connections-from-linux-not-working%2f" title="Share on LinkedIn" target=_blank><span class="fa fa-linkedin fa-2x" aria-hidden=true></span></a>
<a class=nav-item href="https://twitter.com/home?status=Outgoing%20connections%20from%20Linux%20not%20working - https%3a%2f%2fwww.marcfargas.com%2fposts%2foutgoing-connections-from-linux-not-working%2f" title="Tweet this" target=_blank><span class="fa fa-twitter fa-2x"></span></a>
<a class=nav-item href="http://www.reddit.com/submit?url=https%3a%2f%2fwww.marcfargas.com%2fposts%2foutgoing-connections-from-linux-not-working%2f&title=Outgoing%20connections%20from%20Linux%20not%20working" title="Share on Reddit" target=_blank><span class="fa fa-reddit-alien fa-2x" aria-hidden=true></span></a>
</div>
</div>
</section>
<section class=section>
<div class="container has-text-centered">
<p>&copy; 2021 | Follow on <a href=https://twitter.com/telenieko target=_blank>Twitter</a> | <a href=https://github.com/mgjohansen/hucore.git target=_blank>Hucore theme</a> & <a href=http://gohugo.io target=_blank>Hugo</a> â™¥</p>
</div>
</section>
<script src=//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.11.0/highlight.min.js integrity="sha256-+bhVTaRmJ/c07eV80nU8gD2cBBF0rYkf1txqXlrbvb0=" crossorigin=anonymous></script>
<script type=text/javascript src=//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.11.0/languages/go.min.js></script>
<script type=text/javascript src=//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js></script>
<script type=text/javascript src=//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.11.0/languages/python.min.js></script>
<script type=text/javascript src=//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js></script>
<script type=text/javascript src=//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.11.0/languages/bash.min.js></script>
<script type=text/javascript src=//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js></script>
<script type=text/javascript src=//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.11.0/languages/kotlin.min.js></script>
<script type=text/javascript src=//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js></script>
<script type=text/javascript src=//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.11.0/languages/java.min.js></script>
<script type=text/javascript src=//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js></script>
<script>hljs.initHighlightingOnLoad()</script>
</body>